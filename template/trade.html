{% extends 'base.html' %}
{% load static %}

{% block content %}
    <div class="container mx-auto bg-white">
        <div class="my-3 px-2">
            <div class="text-2xl">Table List</div>
            <div class="py-4">
                <div class="xl:w-2/3 w-full mx-auto overflow-auto">
                    <table class="table-auto w-full text-left whitespace-no-wrap">
                        <thead>
                            <tr>
                                <th class="px-1 py-2 title-font tracking-wider font-midium text-gray-900 text-sm bg-gray-100 rounded-tl rounded-bl">Title</th>
                                <th class="px-1 py-2 title-font tracking-wider font-midium text-gray-900 text-sm bg-gray-100 w-4 hidden md:table-cell">場所</th>
                                <th class="px-1 py-2 title-font tracking-wider font-midium text-gray-900 text-sm bg-gray-100 w-28 hidden md:table-cell">ID</th>
                                <th class="px-1 py-2 title-font tracking-wider font-midium text-gray-900 text-sm bg-gray-100 text-center w-10 table-cell md:hidden">
                                    <div>場所</div>
                                    <div>ID</div>
                                </th>
                                <th class="px-1 py-2 title-font tracking-wider font-midium text-gray-900 text-sm bg-gray-100 w-16 hidden sm:table-cell">最終更新</th>
                                <th class="px-1 py-2 title-font tracking-wider font-midium text-gray-900 text-sm bg-gray-100 text-center w-6 rounded-tr rounded-br">返信</th>
                            </tr>
                        </thead>
                        <tbody class="divide-y divide-funchsia-300">
                            <tr>
                                <td class="py-1">
                                    <span class="hover:underline cursor-pointer">にゃんにゃん</span>
                                </td>
                                <td class="px-1 py-1 hidden md:table-cell place_string">PC</td>
                                <td class="px-1 py-1 hidden md:table-cell id_string">aEJMhlUvLMDX</td>
                                <td class="px-1 py-1 table-cell md:hidden">
                                    <div class="h-6 w-6 rounded-full m-auto place_color flex"></div>
                                    <div class="h-6 w-6 rounded-full m-auto id_color"></div>
                                </td>
                                <td class="px-1 py-3 hidden sm:table-cell">2021/03/03 15:01</td>
                                <td class="px-4 py-3 text-center">5</td>
                            </tr>
                            <tr>
                                <td class="py-1">
                                    <span class="hover:underline cursor-pointer">なんとかかんとか売り なんとかかんとか買い</span>
                                </td>
                                <td class="px-1 py-1 hidden md:table-cell place_string">SP</td>
                                <td class="px-1 py-1 hidden md:table-cell id_string">QlmzpRPxD1LL</td>
                                <td class="px-1 py-1 table-cell md:hidden">
                                    <div class="h-6 w-6 rounded-full m-auto place_color flex"></div>
                                    <div class="h-6 w-6 rounded-full m-auto id_color"></div>
                                </td>
                                <td class="px-1 py-3 hidden sm:table-cell">2021/03/03 13:33</td>
                                <td class="px-4 py-3 text-center">1</td>
                            </tr>
                            <tr>
                                <td class="py-1">
                                    <span class="hover:underline cursor-pointer">新モバ買い</span>
                                </td>
                                <td class="px-1 py-1 hidden md:table-cell place_string">PC/SP</td>
                                <td class="px-1 py-1 hidden md:table-cell id_string">RZlMsRD5AvQS</td>
                                <td class="px-1 py-1 table-cell md:hidden">
                                    <div class="h-6 w-6 rounded-full m-auto place_color flex"></div>
                                    <div class="h-6 w-6 rounded-full m-auto id_color"></div>
                                </td>
                                <td class="px-1 py-3 hidden sm:table-cell">2021/03/02 20:56</td>
                                <td class="px-4 py-3 text-center">5</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
    <script src="{% static 'js/chame.js' %}"></script>
    <script type="text/javascript">
        (function(){
            const pc_icon = '<i class="m-auto"><svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.75 17L9 20l-1 1h8l-1-1-.75-3M3 13h18M5 17h14a2 2 0 002-2V5a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"></path></svg></i>'
            const sp_icon = '<i class="m-auto"><svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 18h.01M8 21h8a2 2 0 002-2V5a2 2 0 00-2-2H8a2 2 0 00-2 2v14a2 2 0 002 2z"></path></svg></i>'
            const double_icon = '<i class="m-auto"><svg class="w-3 h-3" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 18h.01M8 21h8a2 2 0 002-2V5a2 2 0 00-2-2H8a2 2 0 00-2 2v14a2 2 0 002 2z"></path></svg></i><i class="m-auto"><svg class="w-3 h-3" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.75 17L9 20l-1 1h8l-1-1-.75-3M3 13h18M5 17h14a2 2 0 002-2V5a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"></path></svg></i>'
            document.querySelectorAll("tbody tr").forEach(function(e){
                const id_color = e.querySelector("td.id_string").textContent.toRGBCode();
                e.querySelector("td .id_color").style.background = id_color;
                const place = e.querySelector("td.place_string").textContent;
                const place_element = e.querySelector("td .place_color")
                if(place == "PC"){
                    place_element.classList.add("bg-yellow-500")
                    place_element.innerHTML = pc_icon
                }else if(place == "SP"){
                    place_element.classList.add("bg-green-500")
                    place_element.innerHTML = sp_icon
                }else{
                    place_element.classList.add("bg-blue-500")
                    place_element.innerHTML = double_icon
                }
            })
        }())
    </script>
{% endblock content %}